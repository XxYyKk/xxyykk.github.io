---
layout: post
title: '[设计思路] 多渠道中 API 的鉴权与管理的方法'
date: 2018-09-29
author: XxYyKk
cover: '/assets/img/postsimg/API1.png'
tags: 问题汇总 设计思路
---

> 多渠道中 API 的鉴权与管理的方法是一种应用编程接口的管理设计。

### 现有方法
现有的 API 调用管理方法，调用方通过携带在 API 管理系统中设置的调用令牌进行鉴权，通过鉴权后转发对应的业务逻辑接口。
管理方法较单一，无法应对多渠道对 API 调用的复杂性，提高了单元之间的耦合性，具体流程如下图。
![简单流程](/assets/img/postsimg/API1.png)

#### 缺点
只进行一步调用方的账号密匙校验。
在多渠道的 API 管理中由于无法满足复杂的多渠道业务需求，导致增加被调用方 API 扩展的复杂度。

### 解决方案
调用方通过 API 管理平台向 API 管理员申请调用渠道信息与相应 API 权限，调用方在通过审核的渠道下配置应用信息、调用 API 时携带的[上下文]、密匙等信息，其树状结构如下图所示

![等级分配](/assets/img/postsimg/API2.png)

当被调用方接到目标 API 的调用请求时，通过鉴定调用方的渠道、应用密匙完成鉴权，鉴权成功后被调用方将所携带的上下文转发到相应的目标接口。本发明为多渠道的平台独立性、服务演变提供安全可靠的设计,使被调用方内部业务设计更加内聚。
![优化方案](/assets/img/postsimg/API3.png)

### 关键点
通过 API 管理平台的渠道+应用双重配置
被调用方通过调用方携带的预设应用信息实现松耦合高内聚的设计



